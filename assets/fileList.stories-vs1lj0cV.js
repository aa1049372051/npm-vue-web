import{u as N}from"./oss-Wjqv1uCe.js";import{j as m,k as i,l,p as O,q as r,s as o,F as c,u as B,v as h,x as p,y as f,z as V}from"./vue.esm-bundler-CNtYpaDd.js";import{_ as T,a as k,b as P,c as v,d as b,e as d,f as L}from"./word-URG0C6V6.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./pinia-DGaUwuEM.js";const S={name:"FileList",setup(){},components:{},data(){return{loadingLock:!1,viewerOptions:{url(a){return a.src.replace("?x-oss-process=image/resize,m_pad,h_50,w_50,color_ffffff","")},filter(a){return!!a.getAttribute("isImg")},toolbar:!1,title:!1,navbar:!1}}},props:{isDelete:{type:Boolean,default(){return!1}},showFileName:{type:Boolean,default(){return!0}},type:{type:String,default(){return"primary"}},size:{type:String,default(){return"mini"}},playType:{type:Array,default(){return["mp3"]}},imgType:{type:Array,default(){return["jpg","gif","png","image/jpeg"]}},file:{type:Array,default(){return[]}},importType:{type:String,default(){return"PC"}},isViewImg:{type:Boolean,default:!1}},methods:{show(a,e){if(this.importType=="Web"&&!this.isViewImg){let s=this.upUrl+"/"+a.filePath;if(a.filePath.indexOf(".xls")!=-1||a.filePath.indexOf(".xlsx")!=-1)return location.href=s,!1;window.download(this.upUrl+"/"+a.filePath);return}a.fileType&&a.fileType!=1&&this.$alert("暂不支持查看此文件,请到手机端查看")}},computed:{upUrl(){return N(window.pinia).upOss},images(){if(!this.file)return[];let a=[];return this.file.forEach(e=>{if(e.fileType==1){let s=this.upUrl+"/"+e.filePath;a.push(s)}}),a},funcFileLoading(){return 200},newFile(){if(!this.file)return[];let a=JSON.parse(JSON.stringify(this.file));return this.file.length>0?a.filter(e=>(e.fileName?e.fileName:e.fileName=e.filename,e.fileSize?e.fileSize:e.fileSize=e.filesize,e.fileSuffix?e.fileSuffix:e.fileSuffix=e.filetype,e.filePath?e.filePath:e.filePath=e.fileurl||e.fileUrl,e.fileType?e.fileType:e.fileType=e.filetype||e.fileType,e.filePath&&e.filePath.indexOf("https://")=="-1"?e.myPath=this.upUrl+"/"+e.filePath:e.myPath=e.filePath,e.myPath+="?x-oss-process=image/resize,m_pad,h_50,w_50,color_ffffff",e.myFileType=e.filePath?e.filePath.replace(/.+\./,""):e.filePath,!0)):[]}},deactivated:function(){},watch:{funcFileLoading(){let a=0,e=0;switch(this.$store.state.openFileState){case 200:this.newFile.filter(s=>(s.fileLoading&&e++,s.fileLoading&&(this.playType.indexOf(s.myFileType)>=0||s.fileType==2)?(this.$set(s,"fileLoading",!1),this.$set(s,"filePlaying",!0),a++):s.fileLoading&&this.$set(s,"fileLoading",!1),!0)),this.loadingLock=!1,a>0?window.jsBundle&&window.jsBundle.notifyOpenFileState(201):e>0&&window.jsBundle&&window.jsBundle.notifyOpenFileState(0);break;case 210:this.newFile.filter(s=>(this.$set(s,"filePlaying",!1),!0)),this.loadingLock=!1,window.jsBundle&&window.jsBundle.notifyOpenFileState(0);break;case 400:this.newFile.filter(s=>(this.$set(s,"fileLoading",!1),!0)),this.loadingLock=!1,window.jsBundle&&window.jsBundle.notifyOpenFileState(0),this.$alert(this.$t("message.fileLoadingErr"),"提示",{type:"warning"});break;case 410:this.newFile.filter(s=>(this.$set(s,"filePlaying",!1),!0)),this.loadingLock=!1,window.jsBundle&&window.jsBundle.notifyOpenFileState(0),this.$alert(this.$t("message.filePlayErr"),"提示",{type:"warning"});break}return""}}},z={class:"en-clo-li fl wid90"},I={class:"clear"},C=["onClick"],E={key:0,class:"del"},U={key:0},D={style:{border:"1px solid #b5bfcf",height:"36px",width:"36px"}},A={key:0,class:"pointer",style:{width:"36px",height:"36px"},src:T},$={key:1,class:"pointer",style:{width:"36px",height:"36px"},src:k},J={key:2,class:"pointer",style:{width:"36px",height:"36px"},src:P},q={key:3,class:"pointer",style:{width:"36px",height:"36px"},src:v},M={key:4,class:"pointer",style:{width:"36px",height:"36px"},src:b},W={key:5,class:"pointer",style:{width:"36px",height:"36px"},src:d},G={key:6,class:"pointer",style:{width:"36px",height:"36px"},src:L},H={key:7,class:"pointer",style:{width:"36px",height:"36px"},src:d},K=["src"],Q={key:2,class:"images",style:{border:"1px solid #b5bfcf",height:"36px",width:"36px"}},R={key:0,class:"pointer",style:{width:"36px",height:"36px"},src:T},X={key:1,class:"pointer",style:{width:"36px",height:"36px"},src:k},Y={key:2,class:"pointer",style:{width:"36px",height:"36px"},src:P},Z={key:3,class:"pointer",style:{width:"36px",height:"36px"},src:v},ee={key:4,class:"pointer",style:{width:"36px",height:"36px"},src:b},te={key:5,class:"pointer",style:{width:"36px",height:"36px"},src:d},ie={key:6,class:"pointer",style:{width:"36px",height:"36px"},src:L},se=["src"],le=["title"];function ae(a,e,s,re,oe,n){const u=m("el-image"),g=m("el-tooltip");return i(),l("div",z,[O(r("span",null,o(n.funcFileLoading),513),[[V,!1]]),r("ul",I,[(i(!0),l(c,null,B(n.newFile,(t,_)=>(i(),l("li",{onClick:pe=>n.show(t,_),key:_},[s.isDelete?(i(),l("i",E)):h("",!0),t.fileName?(i(),p(g,{key:1,placement:"bottom-start"},{content:f(()=>[t.fileName?(i(),l("div",U,o(t.fileName),1)):h("",!0)]),default:f(()=>[r("div",D,[s.playType.indexOf(t.myFileType)>=0&&!t.filePlaying?(i(),l("img",A)):s.playType.indexOf(t.myFileType)>=0&&t.filePlaying?(i(),l("img",$)):t.myFileType=="xlsx"||t.myFileType=="xls"?(i(),l("img",J)):t.myFileType=="pdf"?(i(),l("img",q)):t.myFileType=="txt"?(i(),l("img",M)):t.myFileType=="ppt"||t.myFileType=="pptx"?(i(),l("img",W)):t.myFileType=="doc"||t.myFileType=="docx"?(i(),l("img",G)):t.myFileType=="rar"||t.myFileType=="zip"?(i(),l("img",H)):(i(),l(c,{key:8},[s.isViewImg?(i(),p(u,{key:0,class:"pointer",style:{width:"36px",height:"36px"},src:t.myPath,"preview-src-list":n.images},null,8,["src","preview-src-list"])):(i(),l("img",{key:1,class:"pointer",isImg:"1",style:{width:"36px",height:"36px"},src:t.myPath},null,8,K))],64))])]),_:2},1024)):(i(),l("div",Q,[s.playType.indexOf(t.myFileType)>=0&&!t.filePlaying?(i(),l("img",R)):s.playType.indexOf(t.myFileType)>=0&&t.filePlaying?(i(),l("img",X)):t.myFileType=="xlsx"||t.myFileType=="xls"?(i(),l("img",Y)):t.myFileType=="pdf"?(i(),l("img",Z)):t.myFileType=="txt"?(i(),l("img",ee)):t.myFileType=="ppt"||t.myFileType=="pptx"?(i(),l("img",te)):t.myFileType=="doc"||t.myFileType=="docx"?(i(),l("img",ie)):(i(),l(c,{key:7},[s.isViewImg?(i(),p(u,{key:0,class:"pointer",style:{width:"36px",height:"36px"},src:t.myPath,"preview-src-list":n.images},null,8,["src","preview-src-list"])):(i(),l("img",{key:1,class:"pointer",isImg:"1",style:{width:"36px",height:"36px"},src:t.myPath},null,8,se))],64))])),t.fileName&&s.showFileName?(i(),p(g,{key:3,placement:"bottom-start"},{content:f(()=>[r("div",null,o(t.fileName),1)]),default:f(()=>[r("p",{class:"textover ft-size12 fc-6",style:{width:"36px"},title:t.fileName},o(t.fileName),9,le)]),_:2},1024)):h("",!0)],8,C))),128))])])}const ne=j(S,[["render",ae]]);S.__docgenInfo={displayName:"FileList",exportName:"default",description:"",tags:{},props:[{name:"isDelete",type:{name:"boolean"},defaultValue:{func:!0,value:`function() {
  return false;
}`}},{name:"showFileName",type:{name:"boolean"},defaultValue:{func:!0,value:`function() {
  return true;
}`}},{name:"type",type:{name:"string"},defaultValue:{func:!0,value:`function() {
  return "primary";
}`}},{name:"size",type:{name:"string"},defaultValue:{func:!0,value:`function() {
  return "mini";
}`}},{name:"playType",type:{name:"array"},defaultValue:{func:!1,value:'["mp3"]'}},{name:"imgType",type:{name:"array"},defaultValue:{func:!1,value:'["jpg", "gif", "png", "image/jpeg"]'}},{name:"file",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"importType",type:{name:"string"},defaultValue:{func:!0,value:`function() {
  return "PC";
}`}},{name:"isViewImg",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],sourceFiles:["/home/runner/work/npm-vue-web/npm-vue-web/packages/components/flieList/src/main.vue"]};const ue={component:ne,tags:["autodocs"],argTypes:{},title:"COMPONENTS/FileList",parameters:{componentSubtitle:"文件查看组件",docs:{description:{component:"简单的文件查看组件"}}}},y={args:{file:[{filePath:"business/46551_1715658317_7164.png",fileType:1}],isViewImg:!0}};var w,x,F;y.parameters={...y.parameters,docs:{...(w=y.parameters)==null?void 0:w.docs,source:{originalSource:`{
  args: {
    file: [{
      filePath: 'business/46551_1715658317_7164.png',
      fileType: 1
    }],
    isViewImg: true
  }
}`,...(F=(x=y.parameters)==null?void 0:x.docs)==null?void 0:F.source}}};const ge=["Base"];export{y as Base,ge as __namedExportsOrder,ue as default};
